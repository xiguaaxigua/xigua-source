---
title: 011-表达式-《用AngularJS开发下一代Web应用》-笔记
date: 2016-05-12 10:46:42
tags: [Angular, 读书笔记]
---
读书笔记。
<!--more-->

在模板中使用表达式是为了以充分的灵活性在模板、业务逻辑和数据之间建立联系，同时又能避免让业务逻辑渗透到模板中。

到目前为止，我们大多数情况下是把基本数据类型的引用作为表达式传递给Angular指令的，但是这些表达式实际上还能做更多的事情。可以进行简单的数学运算（+、-、*、/、%），进行比较运算（==、!=、>、<、>=、<=），执行布尔逻辑（&&、||、!），以及位运算（\^、&、|）。你还可以调用控制器中$scope对象上所暴露的函数，引用数组和对象符号（[]、{}、.）。

以及这些都是合法的表达式示例：

``` 
<div ng-controller="SomeController">
	<div>{{recompute() / 10}}</div>
	<ul ng-repeat="thing in things">
		<li ng-class="{highlight: $index % 4 >= threshold($index)}">
			{{otherFunction($index)}}
		</li>
	</ul>
</div>
```

这里的第一个表达式，recompute()/10，虽然是合法的，但是它也是把业务逻辑放到模板中的一个典型例子，应该避免这种语法。清晰地区分视图和控制器之间的职责可以保证含义明确并且易于测试。

尽管我们可以使用表达式做很多事情，但表达式是使用一个自定义的解析器来执行的（这个解析器是Angular的一部分），而不是JavaScript的eval()函数执行的，所以局限性比较大。

表达式是通过Angular内置的解析器执行的。在这款解析器中，你找不到循环结构（for、while等）、流程控制操作符（if-else、throw），以及修改数据的操作符（++、--）。当你需要这些数据类型的操作符时，请在你的控制器中执行或者通过指令执行。

虽然在很多方面这里的表达式比JavaScript更严格，但是他们对undefined和null的容错性更好。如果遇到错误，模板只是简单地什么都不显示，而不会抛出一个NullPointerException错误。这样一来你就可以安全的使用未经初始化的模型值，而一旦它们被填入值之后就会立即出现在UI中。